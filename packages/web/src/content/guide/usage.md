# Auth Vault 使い方ガイド

Auth Vaultは、GitHubリポジトリをCMSとして活用するブログプラットフォームです。あなたのGitHubリポジトリにMarkdownファイルを配置することで、記事を執筆・管理できます。

## はじめる前に

Auth Vaultで記事を投稿するには、以下の準備が必要です。

1. **Auth Vaultアカウント** - ログインしてアカウントを作成します
2. **GitHubアカウント** - 記事の管理にGitHubを使用します
3. **GitHubリポジトリの連携** - 記事を管理するリポジトリを連携します

:::message alert
Auth Vaultは **1つのリポジトリのみ** の連携を想定しています。複数のリポジトリを連携した場合の動作は保証されません。
:::

## アカウントの作成とGitHub連携

### 1. ログイン

トップページ右上の「ログイン」ボタンをクリックし、認証を行います。

### 2. リポジトリの連携

ログイン後、ダッシュボードの設定画面からGitHubリポジトリを連携します。

1. 画面左のメニューから「設定」を選択
2. 「GitHub リポジトリ連携」セクションで「リポジトリを連携」をクリック
3. GitHub Appのインストール画面が表示されるので、連携したいリポジトリを選択
4. インストールを許可して完了

:::message
連携するリポジトリは、記事専用のリポジトリを作成することをお勧めします。既存のプロジェクトリポジトリでも動作しますが、記事ファイルの管理がしやすくなります。
:::

## 記事の書き方

### ファイルの配置

記事はリポジトリの `articles` ディレクトリに、画像は `images` ディレクトリに配置します。

```
your-repository/
├── articles/
│   ├── my-first-article.md
│   └── authentication-guide.md
└── images/
    ├── screenshot-1.png
    └── diagram.png
```

### ファイル名

ファイル名がそのまま記事のURL（スラッグ）になります。

- 使用可能な文字: **半角英数字** と **ハイフン（-）**
- 例: `my-first-article.md` → `/あなたのユーザー名/articles/my-first-article`

:::message alert
ファイル名には日本語や特殊文字を使用しないでください。URLとして使用されるため、半角英数字とハイフンのみを使用してください。
:::

### フロントマター

各記事ファイルの先頭に、YAML形式のフロントマターを記述します。

```yaml
---
title: 記事のタイトル
published: true
targetCategories:
  - authentication
  - security
topics:
  - auth0
  - oauth
  - セキュリティ
---

ここから本文を書きます...
```

| 項目 | 必須 | 説明 |
|------|------|------|
| `title` | はい | 記事のタイトル（最大200文字） |
| `published` | はい | `true` で審査申請、`false` で下書き |
| `targetCategories` | はい | 対象カテゴリ（下記参照） |
| `topics` | いいえ | 記事のトピックタグ（最大10個） |

#### targetCategories について

`targetCategories` は記事の対象分野を示す必須項目です。以下の値から1つ以上を配列で指定してください。

| 値 | 説明 |
|----|------|
| `authentication` | 認証（ログイン、多要素認証など） |
| `authorization` | 認可（権限管理、アクセス制御など） |
| `security` | セキュリティ全般 |

```yaml
# 例：認証と認可に関する記事
targetCategories:
  - authentication
  - authorization
```

:::message
`published: false` の記事はAuth Vaultに同期されません。下書きとしてGitHub上にのみ保存されます。`published: true` に変更してプッシュすると、審査申請が行われます。
:::

## Markdown記法

Auth Vaultは内部で [Zenn](https://zenn.dev) の Markdown 変換ライブラリを使用しているため、**Zennと同じ記法** が使用できます。基本的なMarkdown記法に加え、Zenn独自の拡張記法にも対応しています。

### 見出し

```markdown
# 見出し1
## 見出し2
### 見出し3
#### 見出し4
```

### テキストの装飾

```markdown
**太字テキスト**
*イタリック*
~~打ち消し線~~
```

### リスト

```markdown
- リスト項目1
- リスト項目2
  - ネストしたリスト

1. 番号付きリスト1
2. 番号付きリスト2
```

### リンク

```markdown
[リンクテキスト](https://example.com)
```

### 引用

```markdown
> これは引用文です。
> 複数行にまたがることもできます。
```

### コードブロック

インラインコードは `` `code` `` で囲みます。

複数行のコードブロックは、言語名を指定できます：

````markdown
```javascript
function greet(name) {
  console.log(`Hello, ${name}!`);
}
```
````

### テーブル

```markdown
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| A   | B   | C   |
| D   | E   | F   |
```

### メッセージボックス

情報や警告を目立たせるためのメッセージボックスが使用できます。

```markdown
:::message
通常のメッセージです。補足情報などに使用します。
:::

:::message alert
警告メッセージです。注意が必要な情報に使用します。
:::
```

### アコーディオン（トグル）

クリックで展開できるセクションを作成できます。

```markdown
:::details タイトル
ここに折りたたまれた内容を書きます。
クリックすると展開されます。
:::
```

## 画像の追加

### 画像ファイルの配置

画像は `articles` ディレクトリと同階層の `images` フォルダに配置します。

```
your-repository/
├── articles/
│   └── my-article.md
└── images/
    └── screenshot.png
```

### 画像の参照

Markdownファイル内で相対パスを使って画像を参照します。

```markdown
![代替テキスト](./images/screenshot.png)
```

### 画像の制限

| 項目 | 制限 |
|------|------|
| 対応形式 | JPEG, PNG, WebP, GIF（アニメーション可） |
| ファイルサイズ | 1ファイル最大 3MB |
| 枚数 | 1記事あたり最大 20枚 |

:::message alert
動画ファイルには対応していません。
:::

## 埋め込みコンテンツ

外部サービスのコンテンツを記事内に埋め込むことができます。

### YouTube

```markdown
@[youtube](動画ID)
```

例: `@[youtube](dQw4w9WgXcQ)`

### X（Twitter）

```markdown
@[tweet](ツイートURL)
```

例: `@[tweet](https://twitter.com/example/status/1234567890)`

### GitHub Gist

```markdown
@[gist](GistのURL)
```

例: `@[gist](https://gist.github.com/username/abcdef123456)`

### CodePen

```markdown
@[codepen](https://codepen.io/username/pen/abcdef)
```

### CodeSandbox

```markdown
@[codesandbox](https://codesandbox.io/s/example-id)
```

### StackBlitz

```markdown
@[stackblitz](https://stackblitz.com/edit/example-project)
```

### リンクカード

URLを単独の行に記述すると、自動的にリンクカードとして表示されます。

```markdown
https://example.com/article
```

## 記事の投稿

### 投稿の流れ

1. 記事ファイルを作成し、`published: true` を設定
2. GitHubリポジトリの `main` ブランチにプッシュ
3. 自動的に審査キューに追加される
4. 管理者による審査
5. 承認されると公開

```bash
# 記事を作成してプッシュ
git add articles/my-new-article.md
git commit -m "Add new article: my-new-article"
git push origin main
```

:::message
プッシュは必ず `main` ブランチに対して行ってください。他のブランチへのプッシュは検知されません。
:::

### 記事の更新

公開済みの記事を更新する場合も、同様にファイルを編集してプッシュします。

1. 記事ファイルを編集
2. `main` ブランチにプッシュ
3. 更新内容が再度審査キューに追加される
4. 承認されると更新が反映

## 審査について

Auth Vaultでは、すべての記事が公開前に審査を受けます。これは、プラットフォームの品質と安全性を維持するためです。

### 審査の基準

以下の基準に基づいて審査が行われます。

**承認される記事:**
- 技術的な内容が正確である
- オリジナルのコンテンツである
- 適切な日本語（または英語）で書かれている
- 他者を攻撃・誹謗中傷する内容がない

**却下される可能性がある記事:**
- スパムや宣伝のみを目的とした内容
- 著作権を侵害するコンテンツ
- 差別的・攻撃的な表現
- 個人情報を含む内容
- 技術的に明らかに誤った情報

### 審査結果の確認

審査結果は以下の方法で確認できます。

1. **ダッシュボード** - 左メニューの「記事一覧」でステータスを確認
2. **通知** - 審査完了時に通知が届きます

### ステータスの種類

| ステータス | 説明 |
|------------|------|
| 審査中（新規） | 新規投稿の記事が審査待ち |
| 審査中（更新） | 公開済み記事の更新が審査待ち |
| 公開中 | 審査を通過し、一般公開されている |
| 却下 | 審査で却下された（理由が表示されます） |

:::message alert
記事が却下された場合、却下理由を確認し、内容を修正してから再度プッシュしてください。修正後は再審査の対象となります。
:::

## 記事の削除

公開済みの記事を削除したい場合は、ダッシュボードの記事一覧から削除操作を行ってください。

:::message
GitHubリポジトリからファイルを削除しても、Auth Vault上の記事は自動削除されません。必ずダッシュボードから削除操作を行ってください。
:::

## よくある質問

### Q: 複数のリポジトリを連携できますか？

Auth Vaultは1つのリポジトリのみの連携を想定しています。複数のリポジトリを連携した場合の動作は保証されません。連携先を変更したい場合は、設定画面から現在の連携を解除してから、新しいリポジトリを連携してください。

### Q: 下書きはどこに保存されますか？

`published: false` の記事はGitHubリポジトリ上にのみ存在し、Auth Vaultには同期されません。完成したら `published: true` に変更してプッシュしてください。

### Q: 審査にはどのくらい時間がかかりますか？

審査時間は状況により異なります。通常は数日以内に審査が完了しますが、混雑状況によっては多少お時間をいただく場合があります。

### Q: 却下された記事は再投稿できますか？

はい、却下理由を確認し、内容を修正してから再度プッシュしてください。修正された記事は再審査の対象となります。

### Q: 過去の記事を非公開にできますか？

公開中の記事を非公開にするには、ダッシュボードから記事を削除してください。`published: false` に変更してプッシュしても、すでに公開された記事は自動的に非公開にはなりません。

---

ご不明な点がございましたら、GitHubのIssueにてお問い合わせください。
