---
import BaseLayout from "../../layouts/BaseLayout.astro";
import "zenn-content-css";
import { htmlContent } from "../../generated/guide/review-prompt";
---

<BaseLayout title="記事審査AIプロンプトガイド - Auth Vault">
  <div class="guide-container">
    <article class="guide-content znc" set:html={htmlContent} />

    <div class="back-link">
      <a href="/guide">ガイド一覧に戻る</a>
      <span class="separator">|</span>
      <a href="/">トップページに戻る</a>
    </div>
  </div>

  <!-- Script to handle embed iframe messages (similar to zenn's listen-embed-event.js) -->
  <script is:inline>
    (function() {
      window.addEventListener('message', function(event) {
        var data = event.data;
        if (!data || typeof data !== 'object') return;

        // Handle request-content message from embed iframe
        if (data.type === 'request-content' && data.id) {
          var iframe = document.querySelector('iframe[src*="#' + data.id + '"]');
          if (iframe) {
            var content = iframe.getAttribute('data-content');
            if (content && iframe.contentWindow) {
              iframe.contentWindow.postMessage({
                type: 'content',
                id: data.id,
                content: decodeURIComponent(content)
              }, '*');
            }
          }
        }

        // Handle height adjustment message from embed iframe
        if (data.id && typeof data.height === 'number') {
          var iframe = document.querySelector('iframe[src*="#' + data.id + '"]');
          if (iframe) {
            iframe.style.height = data.height + 'px';
          }
        }
      });
    })();
  </script>
</BaseLayout>

<style>
  .guide-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 1rem;
    overflow-x: hidden;
  }

  .guide-content {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    max-width: 100%;
    overflow-x: hidden;
  }

  .guide-content {
    overflow-wrap: break-word;
    word-break: break-word;
  }

  .guide-content :global(img) {
    max-width: 100%;
    height: auto;
    display: block;
  }

  .guide-content :global(table) {
    max-width: 100%;
    overflow-x: auto;
    display: block;
  }

  .guide-content :global(td),
  .guide-content :global(th) {
    overflow-wrap: break-word;
    word-break: break-word;
    max-width: 100%;
  }

  .guide-content :global(pre) {
    max-width: 100%;
    overflow-x: auto;
  }

  .guide-content :global(iframe) {
    max-width: 100%;
  }

  .guide-content :global(code) {
    word-break: break-all;
    overflow-wrap: anywhere;
  }

  .guide-content :global(a) {
    overflow-wrap: break-word;
    word-break: break-word;
    max-width: 100%;
  }

  .guide-content :global(p),
  .guide-content :global(li),
  .guide-content :global(h1),
  .guide-content :global(h2),
  .guide-content :global(h3),
  .guide-content :global(h4),
  .guide-content :global(h5),
  .guide-content :global(h6) {
    overflow-wrap: break-word;
    word-break: break-word;
    max-width: 100%;
  }

  .back-link {
    text-align: center;
    padding: 2rem 0;
  }

  .back-link a {
    color: #0066cc;
    text-decoration: none;
  }

  .back-link a:hover {
    text-decoration: underline;
  }

  .separator {
    margin: 0 1rem;
    color: #ccc;
  }

  @media (max-width: 768px) {
    .guide-content {
      padding: 1.5rem;
    }
  }
</style>
