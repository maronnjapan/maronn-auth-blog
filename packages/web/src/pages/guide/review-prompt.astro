---
// This page is pre-rendered at build time (SSG) to use zenn-markdown-html
// which requires Node.js built-in modules not available in Cloudflare Workers
export const prerender = true;

import BaseLayout from "../../layouts/BaseLayout.astro";
import markdownToHtmlImport from "zenn-markdown-html";
import "zenn-content-css";
import guideContent from "../../content/guide/review-prompt.md?raw";

type MarkdownToHtmlFn = (markdown: string, options?: { embedOrigin?: string }) => string;

const markdownToHtml: MarkdownToHtmlFn =
  typeof markdownToHtmlImport === "function"
    ? (markdownToHtmlImport as MarkdownToHtmlFn)
    : ((markdownToHtmlImport as { default: MarkdownToHtmlFn }).default as MarkdownToHtmlFn);

let htmlContent = "";

try {
  // Convert Markdown to HTML using zenn-markdown-html
  htmlContent = markdownToHtml(guideContent, { embedOrigin: "" });
} catch (error) {
  console.error("Failed to parse markdown:", error);
  htmlContent = "<p>コンテンツの読み込みに失敗しました。</p>";
}
---

<BaseLayout title="記事審査AIプロンプトガイド - Auth Vault">
  <div class="guide-container">
    <article class="guide-content znc" set:html={htmlContent} />

    <div class="back-link">
      <a href="/guide">ガイド一覧に戻る</a>
      <span class="separator">|</span>
      <a href="/">トップページに戻る</a>
    </div>
  </div>
</BaseLayout>

<style>
  .guide-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .guide-content {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .back-link {
    text-align: center;
    padding: 2rem 0;
  }

  .back-link a {
    color: #0066cc;
    text-decoration: none;
  }

  .back-link a:hover {
    text-decoration: underline;
  }

  .separator {
    margin: 0 1rem;
    color: #ccc;
  }

  @media (max-width: 768px) {
    .guide-content {
      padding: 1.5rem;
    }
  }
</style>
